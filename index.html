<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Will you be my Valentine?</title>
  <style>
    :root{
      --bg1:#f7c4d7;
      --bg2:#fbe3ef;
      --card:#ffffffde;
      --text:#232323;
      --muted:#6b6b6b;
      --yes1:#ff3b86;
      --yes2:#ff6aa6;
      --shadow: 0 18px 50px rgba(0,0,0,.18);
      --radius: 22px;
      --btn-radius: 999px;
      --border: rgba(0,0,0,.06);
    }

    *{ box-sizing:border-box; }
    body{
      margin:0;
      min-height:100vh;
      display:grid;
      place-items:center;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      color:var(--text);
      background:
        radial-gradient(900px 500px at 20% 20%, var(--bg2), transparent 60%),
        radial-gradient(900px 500px at 80% 30%, #ffd3e7, transparent 60%),
        linear-gradient(135deg, var(--bg1), #f8b7cf 40%, #f3a7c6 100%);
      overflow:hidden;
    }

    /* subtle romantic animations container */
    .animation-container{
      position:fixed;
      inset:0;
      pointer-events:none;
      opacity:.6;
      z-index:1;
    }
    
    /* Animation 1: Floating hearts */
    .heart{
      position:absolute;
      width:var(--heart-size, 14px);
      height:var(--heart-size, 14px);
      transform: rotate(45deg);
      background:var(--heart-color, #ff3b86);
      border-radius:20%;
      animation: var(--heart-animation, floatUp) linear infinite;
    }
    .heart::before, .heart::after{
      content:"";
      position:absolute;
      width:var(--heart-size, 14px);
      height:var(--heart-size, 14px);
      background:var(--heart-color, #ff3b86);
      border-radius:50%;
    }
    .heart::before{ left:calc(var(--heart-size, 14px) * -0.5); top:0; }
    .heart::after{ left:0; top:calc(var(--heart-size, 14px) * -0.5); }
    .heart-fall{
      --heart-animation: fallDown;
    }
    @keyframes floatUp{
      from{ transform: translateY(0) rotate(45deg); opacity:0; }
      10%{ opacity:.55; }
      to{ transform: translateY(-120vh) rotate(45deg); opacity:0; }
    }
    
    /* Animation 2: Falling hearts */
    @keyframes fallDown{
      from{ 
        transform: translateY(-100px) rotate(0deg); 
        opacity:0; 
      }
      10%{ opacity:.6; }
      to{ 
        transform: translateY(120vh) rotate(360deg); 
        opacity:0; 
      }
    }
    
    /* Animation 3: Twinkling sparkles */
    .sparkle{
      position:absolute;
      width:8px; height:8px;
      background:#ffe6f0;
      clip-path: polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%);
      animation: twinkle linear infinite;
    }
    @keyframes twinkle{
      0%, 100%{ 
        transform: scale(0) rotate(0deg); 
        opacity:0; 
      }
      50%{ 
        transform: scale(1.5) rotate(180deg); 
        opacity:.7; 
      }
    }
    
    /* Animation 4: Floating butterflies */
    .butterfly{
      position:absolute;
      width:16px; height:12px;
      animation: butterflyFloat linear infinite;
    }
    .butterfly::before, .butterfly::after{
      content:"";
      position:absolute;
      width:8px; height:12px;
      background: linear-gradient(135deg, #ff6aa6, #ffd1e6);
      border-radius: 70% 30% 70% 30%;
      top:0;
    }
    .butterfly::before{ 
      left:0; 
      transform: rotate(-10deg);
      animation: wingLeft 1.5s ease-in-out infinite;
    }
    .butterfly::after{ 
      right:0; 
      transform: rotate(10deg);
      animation: wingRight 1.5s ease-in-out infinite;
    }
    @keyframes butterflyFloat{
      from{ 
        transform: translateY(0) translateX(0); 
        opacity:0; 
      }
      10%{ opacity:.5; }
      50%{ transform: translateY(-60vh) translateX(30px); }
      to{ 
        transform: translateY(-120vh) translateX(-20px); 
        opacity:0; 
      }
    }
    @keyframes wingLeft{
      0%, 100%{ transform: rotate(-10deg) scaleX(1); }
      50%{ transform: rotate(-30deg) scaleX(0.7); }
    }
    @keyframes wingRight{
      0%, 100%{ transform: rotate(10deg) scaleX(1); }
      50%{ transform: rotate(30deg) scaleX(0.7); }
    }

    .card{
      position:relative;
      width:min(560px, 92vw);
      background:var(--card);
      backdrop-filter: blur(10px);
      border:1px solid var(--border);
      border-radius:var(--radius);
      box-shadow: var(--shadow);
      padding:34px 26px 26px;
      z-index:10;
    }

    .top{
      display:grid;
      place-items:center;
      gap:14px;
      margin-bottom:8px;
    }

    .avatar{
      width:92px; height:92px;
      border-radius:50%;
      display:grid;
      place-items:center;
      background:
        radial-gradient(40px 40px at 30% 30%, #ffe6bf, #f2b173),
        radial-gradient(70px 70px at 70% 70%, #f0a964, #e38a3f);
      box-shadow: 0 10px 25px rgba(255, 59, 134, .20);
      position:relative;
    }
    .avatar .ear{
      position:absolute;
      width:18px; height:18px;
      background:#e38a3f;
      top:10px;
      clip-path: polygon(50% 0%, 0% 100%, 100% 100%);
      opacity:.9;
    }
    .avatar .ear.left{ left:18px; transform: rotate(-12deg); }
    .avatar .ear.right{ right:18px; transform: rotate(12deg); }
    .avatar .face{
      width:60px; height:52px;
      position:relative;
    }
    .avatar .eye{
      width:8px; height:8px;
      background:#2b2b2b;
      border-radius:50%;
      position:absolute;
      top:16px;
    }
    .avatar .eye.left{ left:10px; }
    .avatar .eye.right{ right:10px; }
    .avatar .nose{
      position:absolute;
      left:50%;
      top:26px;
      transform: translateX(-50%) rotate(45deg);
      width:8px; height:8px;
      background:#ff6aa6;
      border-radius: 2px;
    }
    .avatar .nose::before, .avatar .nose::after{
      content:"";
      position:absolute;
      width:8px; height:8px;
      background:#ff6aa6;
      border-radius:50%;
    }
    .avatar .nose::before{ left:-4px; top:0; }
    .avatar .nose::after{ left:0; top:-4px; }
    .avatar .blush{
      position:absolute;
      width:14px; height:8px;
      background:rgba(255,106,166,.35);
      border-radius:999px;
      top:28px;
    }
    .avatar .blush.left{ left:0px; }
    .avatar .blush.right{ right:0px; }
    .avatar .mini-heart{
      position:absolute;
      right:-2px;
      top:4px;
      font-size:18px;
      transform: rotate(12deg);
      filter: drop-shadow(0 6px 10px rgba(0,0,0,.12));
    }

    h1{
      font-size: 28px;
      line-height: 1.15;
      margin: 0;
      text-align:center;
      letter-spacing:-.2px;
    }
    h1 .name{
      text-transform: lowercase;
      font-weight: 800;
    }

    .btn-area{
      position:relative;
      height: 96px;
      margin-top: 22px;
    }

    .btn{
      border:0;
      font-size: 18px;
      padding: 14px 26px;
      border-radius: var(--btn-radius);
      cursor:pointer;
      transition: transform .12s ease, filter .12s ease;
      user-select:none;
      -webkit-tap-highlight-color: transparent;
    }
    .btn:active{ transform: scale(.98); }

    .yes{
      position:absolute;
      left: 28%;
      top: 26px;
      transform: translateX(-50%);
      padding: 16px 42px;
      font-weight: 800;
      color: white;
      background: linear-gradient(135deg, var(--yes1), var(--yes2));
      box-shadow: 0 12px 24px rgba(255, 59, 134, .28);
    }
    .yes:hover{ filter: brightness(1.02); transform: translateX(-50%) scale(1.02); }

    /* "No" is positioned absolutely and will move around */
    .no{
      position:absolute;
      left: 72%;
      top: 34px;
      transform: translateX(-50%);
      font-weight: 700;
      color:#222;
      background: #f1f1f4;
      border: 1px solid rgba(0,0,0,.08);
      box-shadow: 0 10px 18px rgba(0,0,0,.10);
    }
    .no:hover{ filter: brightness(1.01); }

    .hint{
      margin-top: 14px;
      text-align:center;
      font-size: 13px;
      color: var(--muted);
    }

    /* Music player styles */
    .music-section{
      position: fixed;
      top: 16px;
      right: 16px;
      z-index: 20;
    }
    .music-btn{
      width: 44px;
      height: 44px;
      border: none;
      border-radius: 999px;
      font-size: 18px;
      font-weight: 700;
      cursor: pointer;
      transition: all .2s ease;
      background: linear-gradient(135deg, var(--yes1), var(--yes2));
      color: white;
      box-shadow: 0 6px 14px rgba(255, 59, 134, .25);
      display: grid;
      place-items: center;
    }
    .music-btn:hover{
      filter: brightness(1.05);
      transform: scale(1.02);
    }
    .music-btn:active{
      transform: scale(.98);
    }
    .music-btn.is-paused{
      background: linear-gradient(135deg, #6b6b6b, #8b8b8b);
      box-shadow: 0 4px 12px rgba(0, 0, 0, .15);
    }
    #youtube-player{
      position: absolute;
      width: 1px;
      height: 1px;
      opacity: 0;
      pointer-events: none;
    }

    .modal{
      position:fixed;
      inset:0;
      display:none;
      place-items:center;
      padding:18px;
      background: rgba(0,0,0,.45);
      backdrop-filter: blur(4px);
      z-index:50;
    }
    .modal.open{ display:grid; }

    .modal-card{
      width:min(520px, 92vw);
      background:white;
      border-radius: 22px;
      padding: 22px 20px;
      box-shadow: 0 22px 70px rgba(0,0,0,.35);
      text-align:center;
      border:1px solid rgba(0,0,0,.06);
    }
    .modal-card h2{
      margin: 10px 0 6px;
      font-size: 26px;
      letter-spacing:-.2px;
    }
    .modal-card p{
      margin:0 0 16px;
      color:#444;
      line-height:1.4;
    }
    .close{
      background:#111;
      color:#fff;
      padding: 12px 18px;
      border-radius: 999px;
      font-weight:700;
    }

    /* confetti */
    canvas#confetti{
      position:fixed;
      inset:0;
      pointer-events:none;
      z-index:100;
    }

    @media (max-width:420px){
      .yes{ left: 30%; }
      .no{ left: 74%; }
      h1{ font-size: 24px; }
    }
  </style>
  <script src="https://www.youtube.com/iframe_api"></script>
</head>
<body>
  <div class="animation-container" aria-hidden="true" id="animation-container"></div>
  <canvas id="confetti"></canvas>

  <main class="card" role="main">
    <div class="top">
      <div class="avatar" aria-hidden="true">
        <div class="ear left"></div>
        <div class="ear right"></div>
        <div class="mini-heart">üíó</div>
        <div class="face">
          <div class="eye left"></div>
          <div class="eye right"></div>
          <div class="nose"></div>
          <div class="blush left"></div>
          <div class="blush right"></div>
        </div>
      </div>

      <h1><span class="name" id="name">priya</span> will you be my valentine?</h1>
    </div>

    <section class="btn-area" id="arena" aria-label="Valentine buttons">
      <button class="btn yes" id="yesBtn">Yes</button>
      <button class="btn no" id="noBtn" aria-label="No (very shy)">No</button>
    </section>

    <div class="hint" id="hint">‚ÄúNo‚Äù seems a bit shy üòà</div>

    <!-- Music control -->
    <div class="music-section">
      <button class="music-btn is-paused" id="play-btn" aria-label="Play background music">‚ñ∂</button>
    </div>
  </main>

  <!-- Hidden YouTube player -->
  <div id="youtube-player"></div>

  <div class="modal" id="modal" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
    <div class="modal-card">
      <div style="font-size:44px;">ü•∞üíê</div>
      <h2 id="modalTitle">Yay!!</h2>
      <p id="modalText">Best decision ever. Dinner + dessert on me ‚ù§Ô∏è</p>
      <button class="btn close" id="closeBtn">Aww okay</button>
    </div>
  </div>

  <script>
    // --- quick personalization ---
    // Change these three constants to customize:
    const WIFE_NAME = "Priya";
    const YES_MESSAGE = "Best decision ever. Dinner + dessert on me ‚ù§Ô∏è";
    const YOUTUBE_URL = "https://www.youtube.com/watch?v=dQw4w9WgXcQ"; // Background music URL

    // apply
    document.getElementById("name").textContent = WIFE_NAME.toLowerCase();
    document.getElementById("modalText").textContent = YES_MESSAGE;

    // --- randomized romantic background animations ---
    const animationContainer = document.getElementById("animation-container");
    
    // Define different animation types
    const heartColors = ["#ff3b86", "#ff6aa6", "#ff87b8", "#ff5d9b"];
    const animationTypes = [
      {
        name: "hearts",
        className: "heart",
        count: 18,
        interval: 700,
        styleGenerator: () => {
          const size = 10 + Math.random() * 16;
          return {
            left: Math.random() * 100 + "vw",
            bottom: (-20 - Math.random()*30) + "px",
            "--heart-size": size + "px",
            "--heart-color": heartColors[Math.floor(Math.random() * heartColors.length)],
            animationDuration: (6 + Math.random() * 8) + "s",
            animationDelay: Math.random() * 2 + "s",
            opacity: 0.1 + Math.random() * 0.25
          };
        }
      },
      {
        name: "falling-hearts",
        className: "heart heart-fall",
        count: 20,
        interval: 600,
        styleGenerator: () => {
          const size = 10 + Math.random() * 14;
          return {
            left: Math.random() * 100 + "vw",
            top: (-20 - Math.random()*30) + "px",
            "--heart-size": size + "px",
            "--heart-color": heartColors[Math.floor(Math.random() * heartColors.length)],
            animationDuration: (8 + Math.random() * 10) + "s",
            animationDelay: Math.random() * 3 + "s",
            opacity: 0.15 + Math.random() * 0.4
          };
        }
      },
      {
        name: "sparkles",
        className: "sparkle",
        count: 15,
        interval: 900,
        styleGenerator: () => {
          const size = 6 + Math.random() * 8;
          return {
            left: Math.random() * 100 + "vw",
            top: Math.random() * 100 + "vh",
            width: size + "px",
            height: size + "px",
            animationDuration: (2 + Math.random() * 3) + "s",
            animationDelay: Math.random() * 2 + "s",
            opacity: 0.2 + Math.random() * 0.5
          };
        }
      },
      {
        name: "butterflies",
        className: "butterfly",
        count: 12,
        interval: 1200,
        styleGenerator: () => {
          const size = 12 + Math.random() * 10;
          return {
            left: Math.random() * 100 + "vw",
            bottom: (-20 - Math.random()*30) + "px",
            width: size + "px",
            height: size * 0.75 + "px",
            animationDuration: (10 + Math.random() * 12) + "s",
            animationDelay: Math.random() * 2 + "s",
            opacity: 0.15 + Math.random() * 0.35
          };
        }
      }
    ];
    
    // Create animation elements
    const makeAnimationElement = (animationType) => {
      const elem = document.createElement("div");
      elem.className = animationType.className;
      
      const styles = animationType.styleGenerator();
      Object.assign(elem.style, styles);
      
      animationContainer.appendChild(elem);
      
      const duration = parseFloat(styles.animationDuration) * 1000;
      const delay = parseFloat(styles.animationDelay) * 1000;
      setTimeout(() => elem.remove(), duration + delay + 200);
    };
    
    // Initialize all animations (subtle and continuous)
    animationTypes.forEach((animationType) => {
      for (let i = 0; i < animationType.count; i++) {
        makeAnimationElement(animationType);
      }
      setInterval(() => makeAnimationElement(animationType), animationType.interval);
    });

    // --- "No" button dodging logic ---
    const arena = document.getElementById("arena");
    const noBtn = document.getElementById("noBtn");
    const yesBtn = document.getElementById("yesBtn");

    // Array of funny phrases for the "No" button
    const funnyPhrases = [
      "No",
      "Are you sure?",
      "Think again!",
      "Really?",
      "Don't be silly!",
      "Try again!",
      "Nope!",
      "Pick the other one!",
      "I'm waiting...",
      "Wrong choice!",
      "Not this one!",
      "Nooo",
      "Pick Yes!",
      "Keep trying!",
      "Maybe reconsider?",
      "Come on...",
      "Click Yes instead!",
      "You sure about that?",
      "Seriously?",
      "That's a mistake!"
    ];

    // Ensure arena is a bounding box for the button to move within
    function clamp(n, min, max){ return Math.max(min, Math.min(max, n)); }

    // Function to get a random funny phrase
    function getRandomPhrase() {
      const randomIndex = Math.floor(Math.random() * funnyPhrases.length);
      return funnyPhrases[randomIndex];
    }

    function rectsOverlap(a, b) {
      return !(
        a.right <= b.left ||
        a.left >= b.right ||
        a.bottom <= b.top ||
        a.top >= b.bottom
      );
    }

    function moveNoButton() {
      // Update button text with a random funny phrase
      noBtn.textContent = getRandomPhrase();
      const a = arena.getBoundingClientRect();
      const b = noBtn.getBoundingClientRect();
      const y = yesBtn.getBoundingClientRect();

      const padding = 10;
      const maxX = a.width - b.width - padding;
      const maxY = a.height - b.height - padding;
      const yesRect = {
        left: y.left - a.left - padding,
        right: y.right - a.left + padding,
        top: y.top - a.top - padding,
        bottom: y.bottom - a.top + padding
      };

      // pick a new random position (avoid overlapping Yes)
      let x = 0;
      let yPos = 0;
      let attempts = 0;
      const maxAttempts = 24;
      do {
        x = Math.random() * maxX + padding;
        yPos = Math.random() * maxY + padding;
        const noRect = {
          left: x,
          right: x + b.width,
          top: yPos,
          bottom: yPos + b.height
        };
        attempts += 1;
        if (!rectsOverlap(noRect, yesRect)) {
          break;
        }
      } while (attempts < maxAttempts);

      // set position relative to arena
      noBtn.style.left = x + "px";
      noBtn.style.top  = yPos + "px";
      noBtn.style.transform = "translateX(0)"; // we switch from %-based centering to px positioning
    }

    // On first layout, convert to px positioning so random placement is consistent
    function initNoButtonPxPos(){
      const a = arena.getBoundingClientRect();
      const b = noBtn.getBoundingClientRect();
      const x = b.left - a.left;
      const y = b.top - a.top;
      noBtn.style.left = x + "px";
      noBtn.style.top  = y + "px";
      noBtn.style.transform = "translateX(0)";
    }
    window.addEventListener("load", () => {
      initNoButtonPxPos();
      // keep it from escaping if the viewport changes
      window.addEventListener("resize", () => initNoButtonPxPos());
    });

    // Hover + touch dodge (mobile-friendly)
    noBtn.addEventListener("mouseenter", moveNoButton);
    noBtn.addEventListener("mouseover", moveNoButton);
    noBtn.addEventListener("touchstart", (e) => { e.preventDefault(); moveNoButton(); }, {passive:false});
    // If they somehow click "No", still dodge
    noBtn.addEventListener("click", (e) => { e.preventDefault(); moveNoButton(); });

    // --- Yes modal + confetti ---
    const modal = document.getElementById("modal");
    const closeBtn = document.getElementById("closeBtn");

    yesBtn.addEventListener("click", () => {
      modal.classList.add("open");
      startConfetti();
    });
    closeBtn.addEventListener("click", () => modal.classList.remove("open"));
    modal.addEventListener("click", (e) => {
      if (e.target === modal) modal.classList.remove("open");
    });

    // Minimal confetti (no libraries)
    const canvas = document.getElementById("confetti");
    const ctx = canvas.getContext("2d");
    let confettiTimer = null;
    let pieces = [];
    function resizeCanvas(){
      canvas.width = window.innerWidth * devicePixelRatio;
      canvas.height = window.innerHeight * devicePixelRatio;
      ctx.setTransform(devicePixelRatio, 0, 0, devicePixelRatio, 0, 0);
    }
    window.addEventListener("resize", resizeCanvas);
    resizeCanvas();

    function startConfetti(){
      pieces = [];
      const count = 160;
      for (let i=0;i<count;i++){
        pieces.push({
          x: Math.random() * window.innerWidth,
          y: -20 - Math.random()*window.innerHeight*0.3,
          r: 3 + Math.random()*4,
          vx: -2 + Math.random()*4,
          vy: 2 + Math.random()*5,
          rot: Math.random()*Math.PI,
          vr: -0.15 + Math.random()*0.3,
          // pink/red/white-ish palette
          c: ["#ff3b86","#ff6aa6","#ffffff","#ffd1e6","#ff2d55"][Math.floor(Math.random()*5)],
          a: 0.7 + Math.random()*0.3
        });
      }

      const start = performance.now();
      const durationMs = 2600;

      if (confettiTimer) cancelAnimationFrame(confettiTimer);

      const tick = (t) => {
        ctx.clearRect(0,0,window.innerWidth, window.innerHeight);

        pieces.forEach(p => {
          p.x += p.vx;
          p.y += p.vy;
          p.vy += 0.03; // gravity
          p.rot += p.vr;

          // wrap a bit horizontally
          if (p.x < -20) p.x = window.innerWidth + 20;
          if (p.x > window.innerWidth + 20) p.x = -20;

          ctx.save();
          ctx.globalAlpha = p.a;
          ctx.translate(p.x, p.y);
          ctx.rotate(p.rot);
          ctx.fillStyle = p.c;
          ctx.fillRect(-p.r, -p.r, p.r*2.2, p.r*1.6);
          ctx.restore();
        });

        if (t - start < durationMs){
          confettiTimer = requestAnimationFrame(tick);
        } else {
          ctx.clearRect(0,0,window.innerWidth, window.innerHeight);
        }
      };
      confettiTimer = requestAnimationFrame(tick);
    }

    // --- YouTube Audio Player ---
    let player;
    let isPlayerReady = false;

    // This function creates the player after the API code downloads.
    window.onYouTubeIframeAPIReady = function() {
      isPlayerReady = true;
      // Auto-play music on page load
      const videoId = extractVideoId(YOUTUBE_URL);
      if (videoId) {
        createPlayer(videoId);
      }
    };

    function extractVideoId(url) {
      // Handle various YouTube URL formats
      const patterns = [
        /(?:youtube\.com\/watch\?v=|youtu\.be\/)([a-zA-Z0-9_-]{11})/,
        /youtube\.com\/embed\/([a-zA-Z0-9_-]{11})/,
        /youtube\.com\/v\/([a-zA-Z0-9_-]{11})/
      ];
      
      for (const pattern of patterns) {
        const match = url.match(pattern);
        if (match) return match[1];
      }
      return null;
    }

    const playBtn = document.getElementById('play-btn');
    let autoPlayAttempted = false;

    const setButtonState = (isPlaying) => {
      playBtn.textContent = isPlaying ? "‚è∏" : "‚ñ∂";
      playBtn.setAttribute(
        "aria-label",
        isPlaying ? "Pause background music" : "Play background music"
      );
      playBtn.classList.toggle("is-paused", !isPlaying);
    };

    const ensurePlayerReady = (videoId) => {
      if (player) return;
      if (!isPlayerReady) {
        let attempts = 0;
        const maxAttempts = 50; // 5 seconds total
        const checkReady = setInterval(() => {
          attempts++;
          if (isPlayerReady || (window.YT && window.YT.Player)) {
            clearInterval(checkReady);
            createPlayer(videoId);
          } else if (attempts >= maxAttempts) {
            clearInterval(checkReady);
          }
        }, 100);
      } else {
        createPlayer(videoId);
      }
    };

    const togglePlayback = () => {
      const url = YOUTUBE_URL;
      const videoId = extractVideoId(url);
      if (!videoId) return;

      if (!player) {
        ensurePlayerReady(videoId);
        return;
      }

      const state = player.getPlayerState();
      if (state === YT.PlayerState.PLAYING) {
        player.pauseVideo();
      } else {
        player.playVideo();
      }
    };

    playBtn.addEventListener('click', togglePlayback);

    function createPlayer(videoId) {
      player = new YT.Player('youtube-player', {
        height: '1',
        width: '1',
        videoId: videoId,
        playerVars: {
          autoplay: 1,
          controls: 0,
          disablekb: 1,
          fs: 0,
          modestbranding: 1,
          playsinline: 1
        },
        events: {
          onReady: (event) => {
            event.target.playVideo();
            setButtonState(true);
          },
          onStateChange: (event) => {
            if (event.data === YT.PlayerState.ENDED) {
              setButtonState(false);
            } else if (event.data === YT.PlayerState.PLAYING) {
              setButtonState(true);
            } else if (event.data === YT.PlayerState.PAUSED) {
              setButtonState(false);
            }
          },
          onError: () => {
            setButtonState(false);
          }
        }
      });
    }

    const attemptAutoPlay = () => {
      if (autoPlayAttempted) return;
      autoPlayAttempted = true;
      const videoId = extractVideoId(YOUTUBE_URL);
      if (videoId) {
        ensurePlayerReady(videoId);
      }
    };

    window.addEventListener("load", attemptAutoPlay);
  </script>
</body>
</html>
